function i(){return new URLSearchParams(window.location.search).get("v")}async function c(n){try{return(await(await fetch("http://localhost:5000/api/summarize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({videoId:n,targetLang:"fr"})})).json()).summary.split(`
`).filter(t=>!!t)}catch(e){return console.error("Erreur lors de la rÃ©cupÃ©ration du rÃ©sumÃ© :",e),null}}function d(n){const e=document.createElement("li");e.style.marginBottom="4px",e.style.overflow="hidden",e.style.textOverflow="ellipsis",e.style.whiteSpace="normal",e.style.display="-webkit-box",e.style.webkitBoxOrient="vertical",e.style.webkitLineClamp="2";const a=n.match(/^\s*[-â€¢]?\s*(\*\*.+?\*\*)(.*)/);if(a){const t=a[1].replace(/\*\*/g,"").trim(),o=a[2].trim(),r=document.createElement("span");r.textContent=t+" ",r.style.fontWeight="500",r.style.fontFamily='"Roboto", "Arial", sans-serif';const s=document.createElement("span");s.textContent=o,e.appendChild(document.createTextNode("â€¢ ")),e.appendChild(r),e.appendChild(s)}else e.textContent=`â€¢ ${n}`;return e}function m(){return getComputedStyle(document.documentElement).getPropertyValue("--yt-spec-base-background").trim()==="#0f0f0f"||window.matchMedia("(prefers-color-scheme: dark)").matches}function p(n){var s;const e=document.querySelector("ytd-engagement-panel-section-list-renderer[target-id='engagement-panel-ads']");if(!e){console.warn("Panneau de publicitÃ© non trouvÃ©.");return}const a=m(),t=document.createElement("div");t.style.background="var(--yt-spec-badge-chip-background)",t.style.borderRadius="12px",t.style.marginBottom="16px",t.style.padding="12px",t.style.fontFamily='"Roboto", "Arial", sans-serif',t.style.fontSize="1.4rem",t.style.lineHeight="2rem",t.style.fontWeight="400",t.style.color=a?"rgb(255, 255, 255)":"#000";const o=document.createElement("h3");o.textContent="ðŸ§  RÃ©sumÃ© de la vidÃ©o",o.style.marginBottom="8px",o.style.fontWeight="500",o.style.fontSize="1.6rem",o.style.color=a?"rgb(255, 255, 255)":"#000",t.appendChild(o);const r=document.createElement("ul");n.forEach(l=>{r.appendChild(d(l))}),t.appendChild(r),(s=e.parentElement)==null||s.insertBefore(t,e)}(async()=>{const n=i();if(n){const e=await c(n);e&&p(e)}})();
